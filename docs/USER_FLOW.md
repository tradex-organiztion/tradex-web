# Tradex 유저 플로우 문서

## 개요

Tradex는 AI 기반 트레이딩 분석 및 매매일지 관리 서비스입니다.

---

## 1. 화면 구성 요소

| 구성 요소 | 설명 |
|-----------|------|
| 화면 내 기능 | 각 페이지의 핵심 기능 영역 |
| 사이드 바 | 네비게이션 및 Tradex AI 접근 |
| 사용자 입력 | 폼, 버튼 등 인터랙션 요소 |
| 팝업 | 모달, 알림, 확인 다이얼로그 |

---

## 2. Login & Signup (인증)

> 📌 **미결 사항**: 소셜 로그인 제공자, 비밀번호 정책 → [DECISIONS.md #1, #2](./DECISIONS.md)

### 2.1 로그인 플로우

```
로그인
├── 소셜 로그인 ─────────────┐
│                           │
└── 기본 로그인 ─────────────┴─→ 추가 정보 입력 → 회원가입 완료 → 로그인 완료
```

### 2.2 인증 기능 목록

| 기능 | 설명 |
|------|------|
| 소셜 로그인 | Google, Apple 등 OAuth 로그인 |
| 기본 로그인 | 이메일/비밀번호 로그인 |
| 추가 정보 입력 | 신규 회원 필수 정보 입력 |
| 회원가입 완료 | 가입 완료 확인 화면 |

---

## 3. Service (서비스)

### 3.1 홈 (Home)

서비스 진입 후 메인 대시보드

```
서비스 진입 → 홈
              ├── AI 분석 보러가기 → Tradex AI (Side)
              ├── 수익 → 수익 관리
              ├── 리스크 매핑 → 리스크 매핑
              └── Tradex AI (Side)
```

#### 홈 화면 기능

| 기능 | 설명 | 연결 화면 |
|------|------|----------|
| AI 분석 보러가기 | AI 분석 결과 바로가기 | Tradex AI (Side) |
| 수익 | 수익 현황 요약 | 수익 관리 |
| 리스크 매핑 | 리스크 현황 요약 | 리스크 매핑 |

---

### 3.2 Tradex AI

AI 채팅 기반 트레이딩 분석 도구 (전역 사이드 패널)

> 📌 **미결 사항**: AI 모델 선택, 음성 입력 지원 여부 → [DECISIONS.md #3, #4](./DECISIONS.md)

```
Tradex AI (Side Panel)
├── 채팅창 입력
├── 파일/이미지 추가
├── 음성 입력 (선택)
├── 히스토리 조회
└── 컨텍스트 인식 (현재 화면 기반)
```

#### Tradex AI 기능

| 기능 | 설명 |
|------|------|
| 채팅창 입력 | 텍스트 기반 AI 질문 |
| 파일/이미지 추가 | 차트 이미지 업로드 분석 |
| 음성 입력 | 음성으로 AI 질문 (선택적 기능) |
| 히스토리 조회 | 이전 대화 내역 확인 |
| 컨텍스트 인식 | 현재 보고 있는 차트/화면 기반 분석 |

#### AI 연동 화면

| 연동 화면 | 기능 |
|----------|------|
| 차트분석 | 현재 차트 기반 AI 분석, 트리거 추천 |
| 매매일지 | 매매 기록 AI 분석 요청, 복기 도움 |
| 매매 등록 | AI 매매 원칙 추천 |
| 전략 분석 | AI 인사이트 생성 |

---

### 3.3 수신함 (Inbox)

알림 및 메시지 관리

```
수신함
├── 필터 (전체 / 트리거 / 매매원칙 / 시스템)
│
├── 트리거 알림 ─────────────┐
│   └── 차트 바로가기 → 차트분석
│
├── 매매원칙 알림 ───────────┤
│   └── 매매일지 바로가기 → 매매일지
│
└── 시스템 알림 ─────────────┤
    └── 읽음 처리 / 삭제
```

#### 알림 유형

| 유형 | 설명 | 발생 조건 |
|------|------|----------|
| 트리거 알림 | 설정한 차트 조건 충족 시 | Trading System 트리거 발동 |
| 매매원칙 알림 | 원칙 관련 리마인더 | 원칙 위반/충족 감지 |
| 시스템 알림 | 서비스 공지, 구독 만료 등 | 시스템 이벤트 |

#### 수신함 기능

| 기능 | 설명 |
|------|------|
| 알림 필터링 | 유형별 알림 분류 조회 |
| 바로가기 | 관련 화면으로 즉시 이동 |
| 읽음 처리 | 개별/전체 읽음 처리 |
| 알림 삭제 | 불필요한 알림 삭제 |

---

### 3.4 매매 등록

매매 원칙 설정 및 관리

```
매매 등록
├── AI 매매 원칙 추천
├── 매매 원칙 추가 → 매매 원칙 알림 수신
└── 매매 원칙 수정
```

#### 매매 등록 기능

| 기능 | 설명 |
|------|------|
| AI 매매 원칙 추천 | AI가 사용자 패턴 기반 원칙 추천 |
| 매매 원칙 추가 | 새로운 매매 원칙 등록 |
| 매매 원칙 수정 | 기존 원칙 수정 |
| 매매 원칙 알림 수신 | 원칙 위반/충족 시 알림 |

---

### 3.5 차트분석

트레이딩 차트 분석 도구

> 📌 **미결 사항**: 지원 거래소/심볼, 실시간 데이터 방식, 차트 라이브러리 → [DECISIONS.md #5, #6, #7](./DECISIONS.md)

```
차트분석
├── 기본 차트 기능
├── Trading System → 설정된 트리거 확인 → 트리거 식별하기
└── Tradex AI (Side)
    ├── 차트 분석 질문
    └── 질문 트리거 설정
```

#### 차트분석 기능

| 기능 | 설명 |
|------|------|
| 기본 차트 기능 | 캔들, 지표, 드로잉 도구 |
| Trading System | 자동매매 트리거 시스템 |
| 설정된 트리거 확인 | 현재 활성화된 트리거 목록 |
| 트리거 식별하기 | 차트에서 트리거 조건 표시 |
| 차트 분석 질문 | AI에게 현재 차트 분석 요청 |
| 질문 트리거 설정 | AI 답변 기반 트리거 생성 |

---

### 3.6 주식 알림 수신 & 매매일지 관리

알림 수신 및 매매 기록 관리

```
주식 알림 수신 → 매매일지 관리
                ├── 매매기록 추가하기
                │   ├── 포지션 정보 입력
                │   └── 진입 근거 입력
                │
                ├── 매매일지 작성하기
                │   ├── 진입 근거 입력
                │   └── 목 복기 입력
                │
                ├── Tradex AI (Side)
                │
                └── 필터
                    ├── 기간 (1일~1년)
                    ├── 포지션 (롱/숏)
                    └── 플러스수익/손실
```

#### 매매일지 기능

| 기능 | 설명 |
|------|------|
| 매매기록 추가하기 | 새로운 매매 기록 등록 |
| 포지션 정보 입력 | 진입가, 수량, 방향 등 |
| 진입 근거 입력 | 매매 진입 이유 기록 |
| 매매일지 작성하기 | 상세 매매일지 작성 |
| 목 복기 입력 | 매매 결과 복기 및 교훈 |
| 필터 | 기간, 포지션, 수익/손실 필터링 |

---

### 3.7 분석 (Analysis)

매매 전략 성과 분석 및 리스크 시각화

> 📌 **미결 사항**: 리스크 계산 공식 → [DECISIONS.md #8](./DECISIONS.md)

```
분석
├── 전략 분석 (/analysis/strategy)
│   ├── 변수 선택 (시간대, 요일, 포지션, 종목, 근거)
│   └── 변수별 성과 차트/테이블
│
├── 리스크 매핑 (/analysis/risk)
│   ├── 포트폴리오 히트맵
│   ├── 리스크 레벨 표시
│   └── 포지션 분포
│
└── 데이터 보기 (/analysis/data)
    ├── 원본 데이터 테이블
    ├── 필터 (기간, 종목, 포지션)
    └── CSV 내보내기
```

#### 전략 분석 기능

| 기능 | 설명 |
|------|------|
| 변수 선택 | 분석할 변수(시간대, 요일, 종목 등) 선택 |
| 성과 분석 | 선택 변수 기반 승률, 수익률 분석 |
| AI 인사이트 | Tradex AI 연동 분석 (선택) |

#### 리스크 매핑 기능

| 기능 | 설명 |
|------|------|
| 리스크 히트맵 | 포트폴리오 리스크 시각화 |
| 리스크 레벨 | 개별 포지션 위험도 표시 |
| 포지션 분포 | 자산/섹터별 분포 확인 |

#### 데이터 보기 기능

| 기능 | 설명 |
|------|------|
| 데이터 테이블 | 전체 매매 기록 원본 조회 |
| 필터링 | 기간, 종목, 포지션별 필터 |
| CSV 내보내기 | 데이터 다운로드 |

> ⚠️ **참고**: 전략 분석은 최소 10건 이상의 매매 데이터 필요

---

### 3.8 수익 관리 (Portfolio)

자산 현황 및 손익 관리

> 📌 **미결 사항**: 지원 거래소 범위, 갱신 주기 → [DECISIONS.md #5](./DECISIONS.md)

```
수익 관리
├── Assets (/portfolio/assets)
│   ├── 총 자산 현황
│   ├── 자산 비중 차트
│   ├── 예상 수익
│   └── 기간별 자산 변화
│
└── P&L (/portfolio/pnl)
    ├── 실현 손익
    ├── 미실현 손익
    ├── 기간별 손익 그래프
    └── 종목별 상세 손익
```

#### Assets 기능

| 기능 | 설명 |
|------|------|
| 총 자산 | 전체 자산 합계 표시 |
| 자산 비중 | 파이/도넛 차트로 비중 시각화 |
| 예상 수익 | 현재 포지션 기준 예상 수익 |
| 자산 변화 | 기간별 자산 증감 추이 |

#### P&L 기능

| 기능 | 설명 |
|------|------|
| 실현 손익 | 청산 완료된 매매 손익 |
| 미실현 손익 | 현재 보유 포지션 평가 손익 |
| 손익 그래프 | 일/주/월별 손익 추이 |
| 종목별 상세 | 개별 종목 손익 내역 |

---

## 4. 설정 (Settings)

> 📌 **미결 사항**: 결제 시스템, 구독 플랜 구성, 지원 언어, 알림 채널 → [DECISIONS.md #9, #10, #11, #12](./DECISIONS.md)

### 4.1 계정 설정 (/settings/account)

```
계정 설정
├── 프로필 사진 (이미지 업로드)
├── 닉네임 (최대 20자)
├── 이메일 (읽기 전용, 소셜 로그인 시)
├── 비밀번호 변경
├── 거래소 API 연동
│   ├── API Key 입력
│   ├── Secret Key 입력
│   └── 연동 테스트
└── 로그아웃 / 회원탈퇴
```

| 기능 | 설명 |
|------|------|
| 프로필 사진 | 프로필 이미지 업로드/변경 |
| 닉네임 | 사용자 닉네임 변경 |
| 비밀번호 | 현재 비밀번호 확인 후 변경 |
| 거래소 API | 거래소 API 키 연동 (암호화 저장) |
| 로그아웃 | 세션 종료 |
| 회원탈퇴 | 계정 삭제 (확인 절차 필요) |

### 4.2 기본 설정 (/settings/preferences)

```
기본 설정
├── 테마 설정
│   ├── 시스템 설정 (기본값)
│   ├── 다크 모드
│   └── 라이트 모드
│
└── 언어 설정
    ├── 한국어 (기본값)
    └── 영어 (미결)
```

| 설정 | 옵션 | 기본값 |
|------|------|--------|
| 테마 | 시스템 / 다크 / 라이트 | 시스템 |
| 언어 | 한국어 / 영어 | 한국어 |

### 4.3 알림 설정 (/settings/notifications)

```
알림 설정
├── 앱 내 알림 (기본 활성)
│   ├── 트리거 알림
│   ├── 매매원칙 알림
│   └── 시스템 알림
│
└── 푸시 알림 (선택)
    ├── 브라우저 푸시
    └── 이메일 알림 (미결)
```

| 알림 유형 | 설명 | 기본값 |
|----------|------|--------|
| 앱 내 알림 | 서비스 내 알림 표시 | 활성 |
| 브라우저 푸시 | 브라우저 푸시 알림 | 비활성 |
| 이메일 알림 | 이메일로 알림 수신 | 미결 |

### 4.4 구독 설정 (/settings/subscription)

```
구독 설정
├── 현재 플랜 표시
│   ├── 플랜명, 가격
│   └── 다음 결제일
│
├── 플랜 비교
│   ├── Free / Pro / Premium
│   └── 기능 비교표
│
├── 플랜 변경
│   └── 업그레이드 / 다운그레이드
│
├── 결제 수단
│   ├── 카드 정보 변경
│   └── 결제 내역 조회
│
└── 구독 해지
    └── 해지 사유 입력 → 확인
```

| 기능 | 설명 |
|------|------|
| 현재 플랜 | 구독 중인 플랜 및 결제 정보 |
| 플랜 비교 | 전체 플랜 기능 비교표 |
| 플랜 변경 | 다른 플랜으로 업/다운그레이드 |
| 결제 수단 | 결제 카드/수단 관리 |
| 결제 내역 | 결제 이력 조회 및 영수증 |
| 구독 해지 | 구독 취소 (확인 절차 필요) |

---

## 5. 페이지 구조 요약

```
/
├── /auth                          # 인증 (공개)
│   ├── /login                     # 로그인
│   ├── /signup                    # 회원가입
│   └── /onboarding                # 추가 정보 입력
│
├── /home                          # 대시보드 (메인)
│
├── /inbox                         # 수신함
│   └── 알림 목록 (트리거/매매원칙/시스템)
│
├── /trading                       # 매매 관리
│   ├── /principles                # 매매 원칙
│   └── /journal                   # 매매일지
│
├── /chart                         # 차트분석
│   └── Trading System 포함
│
├── /analysis                      # 분석
│   ├── /strategy                  # 전략 분석
│   ├── /risk                      # 리스크 매핑
│   └── /data                      # 데이터 보기
│
├── /portfolio                     # 수익 관리
│   ├── /assets                    # 자산 현황
│   └── /pnl                       # 손익 관리
│
├── /settings                      # 설정
│   ├── /account                   # 계정 설정
│   ├── /preferences               # 기본 설정
│   ├── /notifications             # 알림 설정
│   └── /subscription              # 구독 설정
│
└── [Tradex AI]                    # 사이드 패널 (전역)
```

> **참고**: Tradex AI는 별도 라우트가 아닌 전역 사이드 패널로 모든 페이지에서 접근 가능

---

## 6. 상태별 화면 정의

모든 데이터 페이지는 다음 상태를 고려하여 UI를 제공합니다.

### 6.1 로딩 상태 (Loading)

```
┌─────────────────────────────┐
│  ████████                   │  ← 스켈레톤 UI
│  ████████████               │
│  ██████                     │
└─────────────────────────────┘
```

- 스켈레톤 UI로 레이아웃 유지
- 1초 이상 지연 시 로딩 인디케이터 표시

### 6.2 에러 상태 (Error)

```
┌─────────────────────────────┐
│         ⚠️                  │
│   데이터를 불러올 수 없습니다   │
│   [다시 시도]               │
└─────────────────────────────┘
```

- 에러 메시지 + 재시도 버튼
- 네트워크 에러, 서버 에러 구분

### 6.3 빈 상태 (Empty)

```
┌─────────────────────────────┐
│         📝                  │
│   아직 데이터가 없습니다      │
│   [첫 매매 기록 추가하기]    │
└─────────────────────────────┘
```

- 상황에 맞는 안내 메시지
- 다음 행동 유도 CTA 버튼

### 6.4 적용 페이지

| 페이지 | 빈 상태 메시지 | CTA |
|--------|---------------|-----|
| 매매일지 | 아직 매매 기록이 없습니다 | 첫 매매 기록하기 |
| 수신함 | 새로운 알림이 없습니다 | - |
| 전략 분석 | 분석할 데이터가 부족합니다 (최소 10건) | 매매 기록하기 |
| Assets | 연동된 자산이 없습니다 | 거래소 API 연동 |

---

## 7. 핵심 컴포넌트

| 컴포넌트 | 설명 | 사용 위치 |
|----------|------|----------|
| Sidebar | 메인 네비게이션 | 전체 (main 레이아웃) |
| Header | 상단 헤더 | 전체 (main 레이아웃) |
| TradexAIPanel | AI 채팅 사이드 패널 | 전역 (토글 가능) |
| ChartViewer | 차트 뷰어 | 차트분석 |
| TradingSystem | 트리거 시스템 | 차트분석 |
| JournalEditor | 매매일지 에디터 | 매매일지 |
| PrincipleForm | 매매 원칙 폼 | 매매 등록 |
| FilterPanel | 필터 패널 | 매매일지, 데이터 보기, 분석 |
| SkeletonLoader | 스켈레톤 UI | 모든 데이터 페이지 |
| EmptyState | 빈 상태 UI | 모든 데이터 페이지 |
| ErrorBoundary | 에러 처리 | 전체 |

---

## 8. 데이터 모델 개요

### User
- id, email, nickname, profileImage, createdAt

### TradingPrinciple (매매 원칙)
- id, userId, title, description, isActive, notifications

### TradeJournal (매매일지)
- id, userId, symbol, position, entryPrice, exitPrice, entryReason, review, createdAt

### Trigger (트리거)
- id, userId, chartId, condition, isActive, notificationType

### Subscription (구독)
- id, userId, planType, status, startDate, endDate

---

## 9. 미결 사항 참조

구현 전 반드시 확인이 필요한 미결 사항:

| 우선순위 | 항목 | 영향 범위 |
|----------|------|----------|
| 🔴 즉시 | 소셜 로그인 제공자 | Auth |
| 🔴 즉시 | 차트 라이브러리 | Chart |
| 🔴 즉시 | 지원 거래소 | Chart, Trading, Portfolio |
| 🟡 곧 | AI 모델 | Tradex AI |
| 🟡 곧 | 결제 시스템 | Settings |
| 🟢 나중 | 지원 언어 | 전체 |

> 상세 내용: [DECISIONS.md](./DECISIONS.md)

---

*마지막 업데이트: 2025-01*
